#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const dedent = require('dedent');
const { promisify } = require('util');

const writeFile = promisify(fs.writeFile);

const dotenv = dedent`
  # General
  PORT=3000
  NODE_ENV=development
  AUTH=false

  # Authentication
  AUTH_NAME=<NAME>
  AUTH_PASS=<PASSWORD>

  # Services
  PRISMIC_REPOSITORY=<PRISMIC_REPOSITORY>
  PRISMIC_API=<PRISMIC_ENDPOINT>
  PRISMIC_SECRET=<PRISMIC_WEB_HOOK_SECRET>
  PRISMIC_HOOK=/prismic-hook
  PRISMIC_PREVIEW=/prismic-preview
  # GOOGLE_ANALYTICS_ID=<ANALYTICS_ID>
  # MAILCHIMP_ACTION=<MAILCHIMP_EMBED_ACTION>
  TWITTER_USERNAME=TheGlobalGoals
  # TWITTER_CONSUMER_KEY=<TWITTER_CONSUMER_KEY>
  # TWITTER_CONSUMER_SECRET=<TWITTER_CONSUMER_SCRET>
  # FACEBOOK_ID=661699697294563
  INSTAGRAM_USER_ID=30261039
  INSTAGRAM_USERNAME=TheGlobalGoals
  # INSTAGRAM_ACCESS_TOKEN=<INSTAGRAM_ACCESS_TOKEN>

  # Settings
  GLOBALGOALS_NAME=The Global Goals
  GLOBALGOALS_URL=http://localhost:3000
  # FACEBOOK_ID=<FACEBOOK_ID>
  # TWITTER_USERNAME=<TWITTER_USERNAME>
  GLOBALGOALS_LANG=en
  GLOBALGOALS_NUMBER_OF_GRID_LAYOUT=7
  GLOBALGOALS_GRID_LAYOUT_COOKIE_NAME=GLOBALGOALS:grid_layout
`;

writeFile(path.resolve(process.cwd(), '.env'), dotenv).then(
  // eslint-disable-next-line no-console
  () => console.log(dedent`
    > Environment variables were generated successfully
  `),
  // eslint-disable-next-line no-console
  err => console.error(dedent`
    > An error occured in generating files, see error:

    ${ err }
  `)
);
